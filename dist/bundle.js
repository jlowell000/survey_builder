(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Component_1 = require("./common/Component");
const Inputs_1 = require("./common/Inputs");
class CreateInput extends Component_1.default {
    constructor() {
        super(...arguments);
        this.typeOptions = [
            { value: '', text: 'Select Type' },
            { value: 'text', text: 'Text' },
            { value: 'textarea', text: 'Text Area' },
            { value: 'dropdown', text: 'Drop Down' },
            { value: 'checkbox', text: 'Check Box' },
            { value: 'radio', text: 'Radio' }
        ];
        this.optionedType = [
            'dropdown',
            'radio'
        ];
    }
    async init() {
        let name = new Inputs_1.Textinput(null, 'name', {
            placeholder: 'Name of field'
        }), type = new Inputs_1.Dropdown(null, 'type', this.typeOptions);
        type.setOnChangeCallBack(this.onTypeChange.bind(this));
        this.form = new Inputs_1.Form(this.ele, [name, type], {
            inline: 'true'
        });
        this.form.onSubmit = this.onSubmit.bind(this);
        this.childComponents.push(this.form);
        return super.init();
    }
    onTypeChange(value) {
        if (this.optionedType.includes(value)) {
            console.log(`${value} needs options`);
            //TODO: need to make options input
        }
    }
    onSubmit() {
        console.log(this.form.getData());
    }
}
exports.default = CreateInput;

},{"./common/Component":2,"./common/Inputs":3}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Component {
    constructor(ele) {
        this.state = {};
        this.childComponents = [];
        this.ele = ele;
    }
    setState(state) {
        Object.assign(this.state, state);
        return this.init();
    }
    async init() {
        await this.initChildern();
        return this;
    }
    initChildern() {
        return Promise.all(this.childComponents.map(c => { return c.init(); }));
    }
    template() {
        return ``;
    }
}
exports.default = Component;

},{}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Component_1 = require("./Component");
class Input extends Component_1.default {
    constructor(ele, name) {
        super(ele);
        this.name = name;
    }
    getData() {
        let obj = {};
        obj[this.name] = this.value;
        return obj;
    }
    onChange(e) {
        this.value = e.target.value;
        if (this.onChangeCallback)
            this.onChangeCallback(this.value);
    }
    setOnChangeCallBack(callback) {
        this.onChangeCallback = callback;
    }
    templateProps() {
        let p = new Array();
        p.push(' ');
        if (this.state.readonly)
            p.push('readonly');
        if (this.state.disabled)
            p.push('disabled');
        return p.join(' ');
    }
}
exports.Input = Input;
class Form extends Component_1.default {
    constructor(ele, inputs, config) {
        super(ele);
        this.config = {};
        this.childComponents.push(...inputs);
        if (config)
            this.config = config;
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.childComponents.forEach((v, i) => {
            v.ele = this.ele.querySelector(`#input_${i}`);
        });
        this.ele.querySelector('#submit').addEventListener('click', this.onSubmit.bind(this));
        this.ele.querySelector('#cancel').addEventListener('click', this.onCancel.bind(this));
        return super.init();
    }
    getData() {
        let data = {};
        this.childComponents.forEach(i => {
            Object.assign(data, i.getData());
        });
        return data;
    }
    onSubmit() {
        console.log(this.getData());
    }
    onCancel() {
        this.ele.querySelector('form').reset();
    }
    inputsTemplate() {
        let template = this.config.inline ?
            (_v, i) => { return `<p id='input_${i}' class='control'></p>`; } :
            (_v, i) => {
                return `<div class='field'>
                            <p id='input_${i}' class='control'></p>
                        </div>`;
            };
        return this.childComponents.map(template).join('');
    }
    template() {
        return `<form class='box'>
                    ${this.config.inline ? '' : this.inputsTemplate()}
                    <span class='field is-grouped'>
                        ${this.config.inline ? this.inputsTemplate() : ''}
                        <p class='control'><a id='submit' class='button is-primary'>Submit</a></p>
                        <p class='control'><a id='cancel' class='button is-light'>Cancel</a></p>
                    </span>
                </form>`;
    }
}
exports.Form = Form;
//TODO: improve config for inputs
class Textinput extends Input {
    constructor(ele, name, config) {
        super(ele, name);
        this.type = 'text';
        this.placeholder = 'Input';
        if (config) {
            if (config.type)
                this.type = config.type;
            if (config.placeholder)
                this.placeholder = config.placeholder;
        }
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('input').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    template() {
        return `<input class='input' type='${this.type}' placeholder='${this.placeholder}' ${this.templateProps()}>`;
    }
}
exports.Textinput = Textinput;
class Textarea extends Input {
    constructor(ele, name, config) {
        super(ele, name);
        this.placeholder = 'Input';
        if (config) {
            if (config.placeholder)
                this.placeholder = config.placeholder;
            if (config.rows)
                this.rows = config.rows;
        }
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('textarea').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    template() {
        return `<textarea class='textarea' placeholder='${this.state.placeholder}'
        ${this.rows ? ` rows='${this.rows}'` : ''} ${this.templateProps()}></textarea>`;
    }
}
exports.Textarea = Textarea;
class Dropdown extends Input {
    constructor(ele, name, options) {
        super(ele, name);
        this.options = options;
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('select').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    optionsTemplate() {
        return this.options.map(o => {
            return `<option value='${o.value}'>${o.text}</option>`;
        }).join('');
    }
    template() {
        return `<span class='select'>
                    <select ${this.templateProps()}>${this.optionsTemplate()}</select>
                </span>`;
    }
}
exports.Dropdown = Dropdown;
class Checkbox extends Input {
    constructor(ele, name, label) {
        super(ele, name);
        this.label = label;
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('input').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    onChange(e) {
        this.value = e.target.checked;
    }
    template() {
        return `<label class='checkbox'><input type='checkbox' ${this.templateProps()}>${this.label}</label>`;
    }
}
exports.Checkbox = Checkbox;
class Radio extends Input {
    constructor(ele, name, options) {
        super(ele, name);
        this.options = options;
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('div').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    radioTemplate() {
        return this.options.map(o => {
            return ` <label class='radio'><input type='radio' value='${o.value}' name='${this.name}'>${o.text}</label>`;
        }).join('');
    }
    onChange(e) {
        let checkedInput = Array.from(this.ele.querySelectorAll('input'))
            .find(i => {
            return i.checked;
        });
        this.value = checkedInput.value;
    }
    template() {
        return `<div class='control'>${this.radioTemplate()}</div>`;
    }
}
exports.Radio = Radio;

},{"./Component":2}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Component_1 = require("./components/common/Component");
const CreateInput_1 = require("./components/CreateInput");
class Main extends Component_1.default {
    static load() {
        let main = new Main(document.body);
        main.init();
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.childComponents.push(new CreateInput_1.default(this.ele.querySelector('#form')));
        return super.init();
    }
    template() {
        return `<div id='form'></div>`;
    }
}
document.addEventListener('DOMContentLoaded', Main.load);

},{"./components/CreateInput":1,"./components/common/Component":2}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tcG9uZW50cy9DcmVhdGVJbnB1dC50cyIsInNyYy9jb21wb25lbnRzL2NvbW1vbi9Db21wb25lbnQudHMiLCJzcmMvY29tcG9uZW50cy9jb21tb24vSW5wdXRzLnRzIiwic3JjL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLGtEQUEyQztBQUMzQyw0Q0FBb0U7QUFFcEUsTUFBcUIsV0FBWSxTQUFRLG1CQUFTO0lBQWxEOztRQUdZLGdCQUFXLEdBQTZCO1lBQzVDLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFO1lBQ2xDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFO1lBQy9CLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO1lBQ3hDLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO1lBQ3hDLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO1lBQ3hDLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFO1NBQ3BDLENBQUM7UUFDTSxpQkFBWSxHQUFhO1lBQzdCLFVBQVU7WUFDVixPQUFPO1NBQ1YsQ0FBQTtJQTJCTCxDQUFDO0lBekJHLEtBQUssQ0FBQyxJQUFJO1FBQ04sSUFBSSxJQUFJLEdBQUcsSUFBSSxrQkFBUyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUU7WUFDbkMsV0FBVyxFQUFFLGVBQWU7U0FDL0IsQ0FBQyxFQUNFLElBQUksR0FBRyxJQUFJLGlCQUFRLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFeEQsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsSUFB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QUFDLE9BQU8sQ0FBQyxDQUFDO2FBQzVELElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNOLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQztRQUNyQixDQUFDLENBQUMsQ0FBQztRQUVQLElBQUksQ0FBQyxLQUFLLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQztJQUNwQyxDQUFDO0lBRUQsUUFBUTtRQUNKLE9BQU8sd0JBQXdCLElBQUksQ0FBQyxhQUFhLEVBQUUsUUFBUSxDQUFDO0lBQ2hFLENBQUM7Q0FDSjtBQUVzRSxzQkFBSzs7Ozs7QUM5TzVFLDZEQUFzRDtBQUN0RCwwREFBbUQ7QUFFbkQsTUFBTSxJQUFLLFNBQVEsbUJBQVM7SUFFeEIsTUFBTSxDQUFDLElBQUk7UUFDUCxJQUFJLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxLQUFLLENBQUMsSUFBSTtRQUNOLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNyQyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLHFCQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVFLE9BQU8sS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxRQUFRO1FBQ0osT0FBTyx1QkFBdUIsQ0FBQztJQUNuQyxDQUFDO0NBQ0o7QUFFRCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbW1vbi9Db21wb25lbnQnO1xuaW1wb3J0IHsgRm9ybSwgT3B0aW9uLCBEcm9wZG93biwgVGV4dGlucHV0IH0gZnJvbSAnLi9jb21tb24vSW5wdXRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3JlYXRlSW5wdXQgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgcHJpdmF0ZSBmb3JtOiBGb3JtO1xuICAgIHByaXZhdGUgdHlwZU9wdGlvbnM6IE9wdGlvbjxzdHJpbmcsIHN0cmluZz5bXSA9IFtcbiAgICAgICAgeyB2YWx1ZTogJycsIHRleHQ6ICdTZWxlY3QgVHlwZScgfSxcbiAgICAgICAgeyB2YWx1ZTogJ3RleHQnLCB0ZXh0OiAnVGV4dCcgfSxcbiAgICAgICAgeyB2YWx1ZTogJ3RleHRhcmVhJywgdGV4dDogJ1RleHQgQXJlYScgfSxcbiAgICAgICAgeyB2YWx1ZTogJ2Ryb3Bkb3duJywgdGV4dDogJ0Ryb3AgRG93bicgfSxcbiAgICAgICAgeyB2YWx1ZTogJ2NoZWNrYm94JywgdGV4dDogJ0NoZWNrIEJveCcgfSxcbiAgICAgICAgeyB2YWx1ZTogJ3JhZGlvJywgdGV4dDogJ1JhZGlvJyB9XG4gICAgXTtcbiAgICBwcml2YXRlIG9wdGlvbmVkVHlwZTogc3RyaW5nW10gPSBbXG4gICAgICAgICdkcm9wZG93bicsXG4gICAgICAgICdyYWRpbydcbiAgICBdXG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICBsZXQgbmFtZSA9IG5ldyBUZXh0aW5wdXQobnVsbCwgJ25hbWUnLCB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ05hbWUgb2YgZmllbGQnXG4gICAgICAgIH0pLFxuICAgICAgICAgICAgdHlwZSA9IG5ldyBEcm9wZG93bihudWxsLCAndHlwZScsIHRoaXMudHlwZU9wdGlvbnMpO1xuXG4gICAgICAgIHR5cGUuc2V0T25DaGFuZ2VDYWxsQmFjayh0aGlzLm9uVHlwZUNoYW5nZS5iaW5kKHRoaXMpKTtcblxuICAgICAgICB0aGlzLmZvcm0gPSBuZXcgRm9ybSh0aGlzLmVsZSwgW25hbWUsIHR5cGVdLCB7XG4gICAgICAgICAgICBpbmxpbmU6ICd0cnVlJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mb3JtLm9uU3VibWl0ID0gdGhpcy5vblN1Ym1pdC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY2hpbGRDb21wb25lbnRzLnB1c2godGhpcy5mb3JtKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmluaXQoKTtcbiAgICB9XG4gICAgb25UeXBlQ2hhbmdlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9uZWRUeXBlLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dmFsdWV9IG5lZWRzIG9wdGlvbnNgKVxuICAgICAgICAgICAgLy9UT0RPOiBuZWVkIHRvIG1ha2Ugb3B0aW9ucyBpbnB1dFxuICAgICAgICB9XG4gICAgfVxuICAgIG9uU3VibWl0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0uZ2V0RGF0YSgpKVxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wb25lbnQge1xuXG4gICAgcmVhZG9ubHkgc3RhdGU6IGFueSA9IHt9O1xuICAgIGVsZTogRWxlbWVudDtcbiAgICByZWFkb25seSBjaGlsZENvbXBvbmVudHM6IEFycmF5PENvbXBvbmVudD4gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKGVsZTogRWxlbWVudCkge1xuICAgICAgICB0aGlzLmVsZSA9IGVsZTtcbiAgICB9XG4gICAgc2V0U3RhdGUoc3RhdGU6IGFueSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuc3RhdGUsIHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdCgpO1xuICAgIH1cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRDaGlsZGVybigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaW5pdENoaWxkZXJuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5jaGlsZENvbXBvbmVudHMubWFwKGMgPT4geyByZXR1cm4gYy5pbml0KCk7IH0pKTtcbiAgICB9XG4gICAgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBgYDtcbiAgICB9XG59IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0NvbXBvbmVudCc7XG5cbmFic3RyYWN0IGNsYXNzIElucHV0IGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICAgIHByb3RlY3RlZCBuYW1lOiBzdHJpbmc7XG4gICAgcHJvdGVjdGVkIHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuO1xuICAgIHByaXZhdGUgb25DaGFuZ2VDYWxsYmFjazogKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuKSA9PiBhbnk7XG5cbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZykge1xuICAgICAgICBzdXBlcihlbGUpO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cblxuICAgIGdldERhdGEoKSB7XG4gICAgICAgIGxldCBvYmo6IHsgW2s6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfSA9IHt9O1xuICAgICAgICBvYmpbdGhpcy5uYW1lXSA9IHRoaXMudmFsdWVcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgb25DaGFuZ2UoZTogRXZlbnQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcblxuICAgICAgICBpZiAodGhpcy5vbkNoYW5nZUNhbGxiYWNrKSB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sodGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIHNldE9uQ2hhbmdlQ2FsbEJhY2soY2FsbGJhY2s6ICh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbikgPT4gYW55KSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2VDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbiAgICB0ZW1wbGF0ZVByb3BzKCkge1xuICAgICAgICBsZXQgcDogc3RyaW5nW10gPSBuZXcgQXJyYXk8c3RyaW5nPigpO1xuXG4gICAgICAgIHAucHVzaCgnICcpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5yZWFkb25seSkgcC5wdXNoKCdyZWFkb25seScpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5kaXNhYmxlZCkgcC5wdXNoKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgIHJldHVybiBwLmpvaW4oJyAnKTtcbiAgICB9XG59XG5cbmludGVyZmFjZSBPcHRpb248VCBleHRlbmRzIG51bWJlciB8IHN0cmluZywgVSBleHRlbmRzIG51bWJlciB8IHN0cmluZz4ge1xuICAgIHZhbHVlOiBUO1xuICAgIHRleHQ6IFU7XG59XG5cbmNsYXNzIEZvcm0gZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgcHJpdmF0ZSBjb25maWc6IGFueSA9IHt9O1xuXG4gICAgY29uc3RydWN0b3IoZWxlOiBFbGVtZW50LCBpbnB1dHM6IElucHV0W10sIGNvbmZpZz86IGFueSkge1xuICAgICAgICBzdXBlcihlbGUpO1xuICAgICAgICB0aGlzLmNoaWxkQ29tcG9uZW50cy5wdXNoKC4uLmlucHV0cyk7XG4gICAgICAgIGlmIChjb25maWcpIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXQoKSB7XG4gICAgICAgIHRoaXMuZWxlLmlubmVySFRNTCA9IHRoaXMudGVtcGxhdGUoKTtcblxuICAgICAgICB0aGlzLmNoaWxkQ29tcG9uZW50cy5mb3JFYWNoKCh2LCBpKSA9PiB7XG4gICAgICAgICAgICB2LmVsZSA9IHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoYCNpbnB1dF8ke2l9YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJyNzdWJtaXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25TdWJtaXQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJyNjYW5jZWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DYW5jZWwuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmluaXQoKTtcbiAgICB9XG5cbiAgICBnZXREYXRhKCkge1xuICAgICAgICBsZXQgZGF0YSA9IHt9O1xuICAgICAgICB0aGlzLmNoaWxkQ29tcG9uZW50cy5mb3JFYWNoKGkgPT4ge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCAoaSBhcyBJbnB1dCkuZ2V0RGF0YSgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIG9uU3VibWl0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmdldERhdGEoKSk7XG4gICAgfVxuICAgIG9uQ2FuY2VsKCkge1xuICAgICAgICB0aGlzLmVsZS5xdWVyeVNlbGVjdG9yKCdmb3JtJykucmVzZXQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlucHV0c1RlbXBsYXRlKCkge1xuICAgICAgICBsZXQgdGVtcGxhdGUgPSB0aGlzLmNvbmZpZy5pbmxpbmUgP1xuICAgICAgICAgICAgKF92OiBhbnksIGk6IG51bWJlcikgPT4geyByZXR1cm4gYDxwIGlkPSdpbnB1dF8ke2l9JyBjbGFzcz0nY29udHJvbCc+PC9wPmA7IH0gOlxuICAgICAgICAgICAgKF92OiBhbnksIGk6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0nZmllbGQnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGlkPSdpbnB1dF8ke2l9JyBjbGFzcz0nY29udHJvbCc+PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRDb21wb25lbnRzLm1hcCh0ZW1wbGF0ZSkuam9pbignJyk7XG4gICAgfVxuXG4gICAgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBgPGZvcm0gY2xhc3M9J2JveCc+XG4gICAgICAgICAgICAgICAgICAgICR7dGhpcy5jb25maWcuaW5saW5lID8gJycgOiB0aGlzLmlucHV0c1RlbXBsYXRlKCl9XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSdmaWVsZCBpcy1ncm91cGVkJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5jb25maWcuaW5saW5lID8gdGhpcy5pbnB1dHNUZW1wbGF0ZSgpIDogJyd9XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0nY29udHJvbCc+PGEgaWQ9J3N1Ym1pdCcgY2xhc3M9J2J1dHRvbiBpcy1wcmltYXJ5Jz5TdWJtaXQ8L2E+PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9J2NvbnRyb2wnPjxhIGlkPSdjYW5jZWwnIGNsYXNzPSdidXR0b24gaXMtbGlnaHQnPkNhbmNlbDwvYT48L3A+XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Zvcm0+YDtcbiAgICB9XG59XG4vL1RPRE86IGltcHJvdmUgY29uZmlnIGZvciBpbnB1dHNcbmNsYXNzIFRleHRpbnB1dCBleHRlbmRzIElucHV0IHtcblxuICAgIHByaXZhdGUgdHlwZTogc3RyaW5nID0gJ3RleHQnO1xuICAgIHByaXZhdGUgcGxhY2Vob2xkZXI6IHN0cmluZyA9ICdJbnB1dCc7XG5cbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgY29uZmlnPzogYW55KSB7XG4gICAgICAgIHN1cGVyKGVsZSwgbmFtZSk7XG4gICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudHlwZSkgdGhpcy50eXBlID0gY29uZmlnLnR5cGU7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnBsYWNlaG9sZGVyKSB0aGlzLnBsYWNlaG9sZGVyID0gY29uZmlnLnBsYWNlaG9sZGVyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5lbGUuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLmVsZS5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBzdXBlci5pbml0KCk7XG4gICAgfVxuXG4gICAgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBgPGlucHV0IGNsYXNzPSdpbnB1dCcgdHlwZT0nJHt0aGlzLnR5cGV9JyBwbGFjZWhvbGRlcj0nJHt0aGlzLnBsYWNlaG9sZGVyfScgJHt0aGlzLnRlbXBsYXRlUHJvcHMoKX0+YDtcbiAgICB9XG59XG5cbmNsYXNzIFRleHRhcmVhIGV4dGVuZHMgSW5wdXQge1xuXG4gICAgcHJpdmF0ZSBwbGFjZWhvbGRlcjogc3RyaW5nID0gJ0lucHV0JztcbiAgICBwcml2YXRlIHJvd3M6IG51bWJlcjtcbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgY29uZmlnPzogYW55KSB7XG4gICAgICAgIHN1cGVyKGVsZSwgbmFtZSk7XG4gICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcucGxhY2Vob2xkZXIpIHRoaXMucGxhY2Vob2xkZXIgPSBjb25maWcucGxhY2Vob2xkZXI7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnJvd3MpIHRoaXMucm93cyA9IGNvbmZpZy5yb3dzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5lbGUuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLmVsZS5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBzdXBlci5pbml0KCk7XG4gICAgfVxuXG4gICAgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBgPHRleHRhcmVhIGNsYXNzPSd0ZXh0YXJlYScgcGxhY2Vob2xkZXI9JyR7dGhpcy5zdGF0ZS5wbGFjZWhvbGRlcn0nXG4gICAgICAgICR7dGhpcy5yb3dzID8gYCByb3dzPScke3RoaXMucm93c30nYCA6ICcnfSAke3RoaXMudGVtcGxhdGVQcm9wcygpfT48L3RleHRhcmVhPmA7XG4gICAgfVxufVxuXG5jbGFzcyBEcm9wZG93bjxUIGV4dGVuZHMgbnVtYmVyIHwgc3RyaW5nLCBVIGV4dGVuZHMgbnVtYmVyIHwgc3RyaW5nPiBleHRlbmRzIElucHV0IHtcblxuICAgIHByaXZhdGUgb3B0aW9uczogT3B0aW9uPFQsIFU+W107XG5cbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgb3B0aW9uczogT3B0aW9uPFQsIFU+W10pIHtcbiAgICAgICAgc3VwZXIoZWxlLCBuYW1lKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICB0aGlzLmVsZS5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBzdXBlci5pbml0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcHRpb25zVGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWFwKG8gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGA8b3B0aW9uIHZhbHVlPScke28udmFsdWV9Jz4ke28udGV4dH08L29wdGlvbj5gO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGA8c3BhbiBjbGFzcz0nc2VsZWN0Jz5cbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCAke3RoaXMudGVtcGxhdGVQcm9wcygpfT4ke3RoaXMub3B0aW9uc1RlbXBsYXRlKCl9PC9zZWxlY3Q+XG4gICAgICAgICAgICAgICAgPC9zcGFuPmA7XG4gICAgfVxufVxuXG5jbGFzcyBDaGVja2JveCBleHRlbmRzIElucHV0IHtcblxuICAgIHByaXZhdGUgbGFiZWw6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGVsZTogRWxlbWVudCwgbmFtZTogc3RyaW5nLCBsYWJlbDogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGVsZSwgbmFtZSk7XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICB0aGlzLmVsZS5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmluaXQoKTtcbiAgICB9XG5cbiAgICBvbkNoYW5nZShlOiBFdmVudCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmNoZWNrZWQ7XG4gICAgfVxuXG4gICAgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBgPGxhYmVsIGNsYXNzPSdjaGVja2JveCc+PGlucHV0IHR5cGU9J2NoZWNrYm94JyAke3RoaXMudGVtcGxhdGVQcm9wcygpfT4ke3RoaXMubGFiZWx9PC9sYWJlbD5gXG4gICAgfVxufVxuXG5jbGFzcyBSYWRpbzxUIGV4dGVuZHMgbnVtYmVyIHwgc3RyaW5nLCBVIGV4dGVuZHMgbnVtYmVyIHwgc3RyaW5nPiBleHRlbmRzIElucHV0IHtcblxuICAgIHByaXZhdGUgb3B0aW9uczogT3B0aW9uPFQsIFU+W107XG5cbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgb3B0aW9uczogT3B0aW9uPFQsIFU+W10pIHtcbiAgICAgICAgc3VwZXIoZWxlLCBuYW1lKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICB0aGlzLmVsZS5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJ2RpdicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBzdXBlci5pbml0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByYWRpb1RlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1hcChvID0+IHtcbiAgICAgICAgICAgIHJldHVybiBgIDxsYWJlbCBjbGFzcz0ncmFkaW8nPjxpbnB1dCB0eXBlPSdyYWRpbycgdmFsdWU9JyR7by52YWx1ZX0nIG5hbWU9JyR7dGhpcy5uYW1lfSc+JHtvLnRleHR9PC9sYWJlbD5gXG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlKGU6IEV2ZW50KSB7XG4gICAgICAgIGxldCBjaGVja2VkSW5wdXQgPSBBcnJheS5mcm9tKHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykpXG4gICAgICAgICAgICAuZmluZChpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaS5jaGVja2VkO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy52YWx1ZSA9IGNoZWNrZWRJbnB1dC52YWx1ZTtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPSdjb250cm9sJz4ke3RoaXMucmFkaW9UZW1wbGF0ZSgpfTwvZGl2PmA7XG4gICAgfVxufVxuXG5leHBvcnQgeyBJbnB1dCwgT3B0aW9uLCBGb3JtLCBUZXh0aW5wdXQsIFRleHRhcmVhLCBEcm9wZG93biwgQ2hlY2tib3gsIFJhZGlvIH07IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudHMvY29tbW9uL0NvbXBvbmVudCc7XG5pbXBvcnQgQ3JlYXRlSW5wdXQgZnJvbSAnLi9jb21wb25lbnRzL0NyZWF0ZUlucHV0JztcblxuY2xhc3MgTWFpbiBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICBzdGF0aWMgbG9hZCgpIHtcbiAgICAgICAgbGV0IG1haW4gPSBuZXcgTWFpbihkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgbWFpbi5pbml0KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5lbGUuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLmNoaWxkQ29tcG9uZW50cy5wdXNoKG5ldyBDcmVhdGVJbnB1dCh0aGlzLmVsZS5xdWVyeVNlbGVjdG9yKCcjZm9ybScpKSk7XG4gICAgICAgIHJldHVybiBzdXBlci5pbml0KCk7XG4gICAgfVxuXG4gICAgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBgPGRpdiBpZD0nZm9ybSc+PC9kaXY+YDtcbiAgICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBNYWluLmxvYWQpOyJdfQ==
