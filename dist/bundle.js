(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Component_1 = require("./common/Component");
const Inputs_1 = require("./common/Inputs");
class CreateInput extends Component_1.default {
    constructor() {
        super(...arguments);
        this.typeOptions = [
            { value: '', text: 'Select Type' },
            { value: 'text', text: 'Text' },
            { value: 'textarea', text: 'Text Area' },
            { value: 'dropdown', text: 'Drop Down' },
            { value: 'checkbox', text: 'Check Box' },
            { value: 'radio', text: 'Radio' }
        ];
        this.optionedType = [
            'dropdown',
            'radio'
        ];
    }
    async init() {
        let name = new Inputs_1.Textinput(null, 'name', {
            label: 'Field Name',
            placeholder: 'Name of field'
        }), type = new Inputs_1.Dropdown(null, 'type', this.typeOptions, {
            label: 'Input Type'
        }), desc = new Inputs_1.Textarea(null, 'question', {
            label: 'Question',
            placeholder: 'Question . . .'
        });
        type.setOnChangeCallBack(this.onTypeChange.bind(this));
        this.form = new Inputs_1.Form(this.ele, [name, type, desc]);
        this.form.onSubmit = this.onSubmit.bind(this);
        this.childComponents.push(this.form);
        return super.init();
    }
    onTypeChange(value) {
        if (this.optionedType.includes(value)) {
            console.log(`${value} needs options`);
            //TODO: need to make options input
        }
    }
    onSubmit() {
        console.log(this.form.getData());
    }
}
exports.default = CreateInput;

},{"./common/Component":2,"./common/Inputs":3}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Component {
    constructor(ele, config) {
        this.state = {};
        this.childComponents = [];
        this.ele = ele;
        this.config = config;
    }
    setState(state) {
        Object.assign(this.state, state);
        return this.init();
    }
    async init() {
        await this.initChildern();
        return this;
    }
    initChildern() {
        return Promise.all(this.childComponents.map(c => { return c.init(); }));
    }
    template() {
        return ``;
    }
}
exports.default = Component;
exports.Component = Component;

},{}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Component_1 = require("./Component");
class Input extends Component_1.Component {
    constructor(ele, name, config) {
        super(ele, config);
        this.name = name;
    }
    getData() {
        let obj = {};
        obj[this.name] = this.value;
        return obj;
    }
    onChange(e) {
        this.value = e.target.value;
        if (this.onChangeCallback)
            this.onChangeCallback(this.value);
    }
    setOnChangeCallBack(callback) {
        this.onChangeCallback = callback;
    }
    templateProps() {
        let p = new Array();
        p.push(' ');
        if (this.state.readonly)
            p.push('readonly');
        if (this.state.disabled)
            p.push('disabled');
        return p.join(' ');
    }
}
exports.Input = Input;
class Form extends Component_1.Component {
    constructor(ele, inputs, config) {
        super(ele, config);
        this.childComponents.push(...inputs);
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.childComponents.forEach((v, i) => {
            v.ele = this.ele.querySelector(`#input_${i}`);
        });
        this.ele.querySelector('#submit').addEventListener('click', this.onSubmit.bind(this));
        this.ele.querySelector('#cancel').addEventListener('click', this.onCancel.bind(this));
        return super.init();
    }
    getData() {
        let data = {};
        this.childComponents.forEach(i => {
            Object.assign(data, i.getData());
        });
        return data;
    }
    onSubmit() {
        console.log(this.getData());
    }
    onCancel() {
        this.ele.querySelector('form').reset();
    }
    inputsTemplate() {
        let config = this.config, template = this.config && config.inline ?
            (_v, i) => { return `<p id='input_${i}' class='control'></p>`; } :
            (_v, i) => {
                return `<div class='field'>
                            <p id='input_${i}' class='control'></p>
                        </div>`;
            };
        return this.childComponents.map(template).join('');
    }
    template() {
        let config = this.config;
        return `<form class='box'>
                    ${this.config && config.inline ? '' : this.inputsTemplate()}
                    <span class='field is-grouped'>
                        ${this.config && config.inline ? this.inputsTemplate() : ''}
                        <p class='control'><a id='submit' class='button is-primary'>Submit</a></p>
                        <p class='control'><a id='cancel' class='button is-light'>Cancel</a></p>
                    </span>
                </form>`;
    }
}
exports.Form = Form;
class Textinput extends Input {
    constructor(ele, name, config) {
        super(ele, name, config);
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('input').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    template() {
        let config = this.config;
        return `<label>${config.label ? config.label : name}
                    <input class='input' type='${config.type ? config.type : 'text'}' 
                        placeholder='${config.placeholder ? config.placeholder : 'input'}' ${this.templateProps()}>
                </label>`;
    }
}
exports.Textinput = Textinput;
class Textarea extends Input {
    constructor(ele, name, config) {
        super(ele, name, config);
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('textarea').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    template() {
        let config = this.config;
        return `<label>${config.label ? config.label : this.name}
                    <textarea class='textarea' placeholder='${config.placeholder ? config.placeholder : 'Input'}'
                    ${config.rows ? ` rows='${config.rows}'` : ''} ${this.templateProps()}></textarea>
                </label>`;
    }
}
exports.Textarea = Textarea;
class Dropdown extends Input {
    constructor(ele, name, options, config) {
        super(ele, name, config);
        this.options = options;
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('select').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    optionsTemplate() {
        return this.options.map(o => {
            return `<option value='${o.value}'>${o.text}</option>`;
        }).join('');
    }
    template() {
        let config = this.config;
        return `<label>${config.label ? config.label : this.name}
                    <span class='select'><select ${this.templateProps()}>${this.optionsTemplate()}</select></span>
                </label>`;
    }
}
exports.Dropdown = Dropdown;
class Checkbox extends Input {
    constructor(ele, name, config) {
        super(ele, name, config);
        if (config.label)
            this.label = config.label;
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('input').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    onChange(e) {
        this.value = e.target.checked;
    }
    template() {
        let config = this.config;
        return `<label class='checkbox'>${config.label ? config.label : this.name}<input type='checkbox' ${this.templateProps()}></label>`;
    }
}
exports.Checkbox = Checkbox;
class Radio extends Input {
    constructor(ele, name, options, config) {
        super(ele, name, config);
        this.options = options;
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.ele.querySelector('div').addEventListener('change', this.onChange.bind(this));
        return super.init();
    }
    radioTemplate() {
        let config = this.config;
        return this.options.map(o => {
            return `<label class='radio'>${config.label ? config.label : this.name}
                        <input type='radio' value='${o.value}' name='${this.name}'>${o.text}
                    </label>`;
        }).join('');
    }
    onChange(e) {
        let checkedInput = Array.from(this.ele.querySelectorAll('input'))
            .find(i => {
            return i.checked;
        });
        this.value = checkedInput.value;
    }
    template() {
        return `<div class='control'>${this.radioTemplate()}</div>`;
    }
}
exports.Radio = Radio;

},{"./Component":2}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Component_1 = require("./components/common/Component");
const CreateInput_1 = require("./components/CreateInput");
class Main extends Component_1.default {
    static load() {
        let main = new Main(document.body);
        main.init();
    }
    async init() {
        this.ele.innerHTML = this.template();
        this.childComponents.push(new CreateInput_1.default(this.ele.querySelector('#form')));
        return super.init();
    }
    template() {
        return `<div id='form'></div>`;
    }
}
document.addEventListener('DOMContentLoaded', Main.load);

},{"./components/CreateInput":1,"./components/common/Component":2}]},{},[4])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tcG9uZW50cy9DcmVhdGVJbnB1dC50cyIsInNyYy9jb21wb25lbnRzL2NvbW1vbi9Db21wb25lbnQudHMiLCJzcmMvY29tcG9uZW50cy9jb21tb24vSW5wdXRzLnRzIiwic3JjL21haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLGtEQUEyQztBQUMzQyw0Q0FBdUg7QUFFdkgsTUFBcUIsV0FBWSxTQUFRLG1CQUFTO0lBQWxEOztRQUdZLGdCQUFXLEdBQTZCO1lBQzVDLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFO1lBQ2xDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFO1lBQy9CLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO1lBQ3hDLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO1lBQ3hDLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFO1lBQ3hDLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFO1NBQ3BDLENBQUM7UUFDTSxpQkFBWSxHQUFhO1lBQzdCLFVBQVU7WUFDVixPQUFPO1NBQ1YsQ0FBQTtJQWdDTCxDQUFDO0lBOUJHLEtBQUssQ0FBQyxJQUFJO1FBQ04sSUFBSSxJQUFJLEdBQUcsSUFBSSxrQkFBUyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUU7WUFDbkMsS0FBSyxFQUFFLFlBQVk7WUFDbkIsV0FBVyxFQUFFLGVBQWU7U0FDL0IsQ0FBQyxFQUNFLElBQUksR0FBRyxJQUFJLGlCQUFRLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ2hELEtBQUssRUFBRSxZQUFZO1NBQ3RCLENBQUMsRUFD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aUUsc0JBQUs7Ozs7O0FDNVB2RSw2REFBc0Q7QUFDdEQsMERBQW1EO0FBRW5ELE1BQU0sSUFBSyxTQUFRLG1CQUFTO0lBRXhCLE1BQU0sQ0FBQyxJQUFJO1FBQ1AsSUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRUQsS0FBSyxDQUFDLElBQUk7UUFDTixJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDckMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxxQkFBVyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM1RSxPQUFPLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRUQsUUFBUTtRQUNKLE9BQU8sdUJBQXVCLENBQUM7SUFDbkMsQ0FBQztDQUNKO0FBRUQsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21tb24vQ29tcG9uZW50JztcbmltcG9ydCB7IEZvcm0sIE9wdGlvbiwgRHJvcGRvd24sIFRleHRpbnB1dCwgVGV4dGFyZWEsIElucHV0Q29uZmlnLCBGb3JtQ29uZmlnLCBUZXh0YXJlYUNvbmZpZyB9IGZyb20gJy4vY29tbW9uL0lucHV0cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWF0ZUlucHV0IGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICAgIHByaXZhdGUgZm9ybTogRm9ybTtcbiAgICBwcml2YXRlIHR5cGVPcHRpb25zOiBPcHRpb248c3RyaW5nLCBzdHJpbmc+W10gPSBbXG4gICAgICAgIHsgdmFsdWU6ICcnLCB0ZXh0OiAnU2VsZWN0IFR5cGUnIH0sXG4gICAgICAgIHsgdmFsdWU6ICd0ZXh0JywgdGV4dDogJ1RleHQnIH0sXG4gICAgICAgIHsgdmFsdWU6ICd0ZXh0YXJlYScsIHRleHQ6ICdUZXh0IEFyZWEnIH0sXG4gICAgICAgIHsgdmFsdWU6ICdkcm9wZG93bicsIHRleHQ6ICdEcm9wIERvd24nIH0sXG4gICAgICAgIHsgdmFsdWU6ICdjaGVja2JveCcsIHRleHQ6ICdDaGVjayBCb3gnIH0sXG4gICAgICAgIHsgdmFsdWU6ICdyYWRpbycsIHRleHQ6ICdSYWRpbycgfVxuICAgIF07XG4gICAgcHJpdmF0ZSBvcHRpb25lZFR5cGU6IHN0cmluZ1tdID0gW1xuICAgICAgICAnZHJvcGRvd24nLFxuICAgICAgICAncmFkaW8nXG4gICAgXVxuXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgbGV0IG5hbWUgPSBuZXcgVGV4dGlucHV0KG51bGwsICduYW1lJywge1xuICAgICAgICAgICAgbGFiZWw6ICdGaWVsZCBOYW1lJyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnTmFtZSBvZiBmaWVsZCdcbiAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlID0gbmV3IERyb3Bkb3duKG51bGwsICd0eXBlJywgdGhpcy50eXBlT3B0aW9ucywge1xuICAgICAgICAgICAgICAgIGxhYmVsOiAnSW5wdXQgVHlwZSdcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZGVzYyA9IG5ldyBUZXh0YXJlYShudWxsLCAncXVlc3Rpb24nLCB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdRdWVzdGlvbicsXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdRdWVzdGlvbiAuIC4gLidcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHR5cGUuc2V0T25DaGFuZ2VDYWxsQmFjayh0aGlzLm9uVHlwZUNoYW5nZS5iaW5kKHRoaXMpKTtcblxuICAgICAgICB0aGlzLmZvcm0gPSBuZXcgRm9ybSh0aGlzLmVsZSwgW25hbWUsIHR5cGUsIGRlc2NdKTtcbiAgICAgICAgdGhpcy5mb3JtLm9uU3VibWl0ID0gdGhpcy5vblN1Ym1pdC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY2hpbGRDb21wb25lbnRzLnB1c2godGhpcy5mb3JtKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmluaXQoKTtcbiAgICB9XG4gICAgb25UeXBlQ2hhbmdlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9uZWRUeXBlLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dmFsdWV9IG5lZWRzIG9wdGlvbnNgKVxuICAgICAgICAgICAgLy9UT0RPOiBuZWVkIHRvIG1ha2Ugb3B0aW9ucyBpbnB1dFxuICAgICAgICB9XG4gICAgfVxuICAgIG9uU3VibWl0KCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0uZ2V0RGF0YSgpKVxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wb25lbnQge1xuXG4gICAgcmVhZG9ubHkgc3RhdGU6IGFueSA9IHt9O1xuICAgIGVsZTogRWxlbWVudDtcbiAgICByZWFkb25seSBjaGlsZENvbXBvbmVudHM6IEFycmF5PENvbXBvbmVudD4gPSBbXTtcbiAgICByZWFkb25seSBjb25maWc6IENvbXBvbmVudENvbmZpZztcblxuICAgIGNvbnN0cnVjdG9yKGVsZTogRWxlbWVudCwgY29uZmlnPzogQ29tcG9uZW50Q29uZmlnKSB7XG4gICAgICAgIHRoaXMuZWxlID0gZWxlO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICB9XG4gICAgc2V0U3RhdGUoc3RhdGU6IGFueSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuc3RhdGUsIHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdCgpO1xuICAgIH1cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRDaGlsZGVybigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaW5pdENoaWxkZXJuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodGhpcy5jaGlsZENvbXBvbmVudHMubWFwKGMgPT4geyByZXR1cm4gYy5pbml0KCk7IH0pKTtcbiAgICB9XG4gICAgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBgYDtcbiAgICB9XG59XG5cbmludGVyZmFjZSBDb21wb25lbnRDb25maWcge1xuICAgIGNsYXNzZXM/OiBzdHJpbmdbXTtcbiAgICBhdHRyaWJ1dGVzPzogTWFwPHN0cmluZywgc3RyaW5nPjtcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb25maWcgfSIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29uZmlnIH0gZnJvbSAnLi9Db21wb25lbnQnO1xuXG5hYnN0cmFjdCBjbGFzcyBJbnB1dCBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICBwcm90ZWN0ZWQgbmFtZTogc3RyaW5nO1xuICAgIHByb3RlY3RlZCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbjtcbiAgICBwcml2YXRlIG9uQ2hhbmdlQ2FsbGJhY2s6ICh2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbikgPT4gYW55O1xuXG4gICAgY29uc3RydWN0b3IoZWxlOiBFbGVtZW50LCBuYW1lOiBzdHJpbmcsIGNvbmZpZz86IElucHV0Q29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGVsZSwgY29uZmlnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG5cbiAgICBnZXREYXRhKCkge1xuICAgICAgICBsZXQgb2JqOiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIH0gPSB7fTtcbiAgICAgICAgb2JqW3RoaXMubmFtZV0gPSB0aGlzLnZhbHVlXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIG9uQ2hhbmdlKGU6IEV2ZW50KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XG5cbiAgICAgICAgaWYgKHRoaXMub25DaGFuZ2VDYWxsYmFjaykgdGhpcy5vbkNoYW5nZUNhbGxiYWNrKHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICBzZXRPbkNoYW5nZUNhbGxCYWNrKGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4pID0+IGFueSkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgdGVtcGxhdGVQcm9wcygpIHtcbiAgICAgICAgbGV0IHA6IHN0cmluZ1tdID0gbmV3IEFycmF5PHN0cmluZz4oKTtcblxuICAgICAgICBwLnB1c2goJyAnKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucmVhZG9ubHkpIHAucHVzaCgncmVhZG9ubHknKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZGlzYWJsZWQpIHAucHVzaCgnZGlzYWJsZWQnKTtcblxuICAgICAgICByZXR1cm4gcC5qb2luKCcgJyk7XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgSW5wdXRDb25maWcgZXh0ZW5kcyBDb21wb25lbnRDb25maWcge1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBPcHRpb248VCBleHRlbmRzIG51bWJlciB8IHN0cmluZywgVSBleHRlbmRzIG51bWJlciB8IHN0cmluZz4ge1xuICAgIHZhbHVlOiBUO1xuICAgIHRleHQ6IFU7XG59XG5cbmNsYXNzIEZvcm0gZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gICAgY29uc3RydWN0b3IoZWxlOiBFbGVtZW50LCBpbnB1dHM6IElucHV0W10sIGNvbmZpZz86IEZvcm1Db25maWcpIHtcbiAgICAgICAgc3VwZXIoZWxlLCBjb25maWcpO1xuICAgICAgICB0aGlzLmNoaWxkQ29tcG9uZW50cy5wdXNoKC4uLmlucHV0cyk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5lbGUuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZSgpO1xuXG4gICAgICAgIHRoaXMuY2hpbGRDb21wb25lbnRzLmZvckVhY2goKHYsIGkpID0+IHtcbiAgICAgICAgICAgIHYuZWxlID0gdGhpcy5lbGUucXVlcnlTZWxlY3RvcihgI2lucHV0XyR7aX1gKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5lbGUucXVlcnlTZWxlY3RvcignI3N1Ym1pdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vblN1Ym1pdC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5lbGUucXVlcnlTZWxlY3RvcignI2NhbmNlbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNhbmNlbC5iaW5kKHRoaXMpKTtcblxuICAgICAgICByZXR1cm4gc3VwZXIuaW5pdCgpO1xuICAgIH1cblxuICAgIGdldERhdGEoKSB7XG4gICAgICAgIGxldCBkYXRhID0ge307XG4gICAgICAgIHRoaXMuY2hpbGRDb21wb25lbnRzLmZvckVhY2goaSA9PiB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGRhdGEsIChpIGFzIElucHV0KS5nZXREYXRhKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgb25TdWJtaXQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ2V0RGF0YSgpKTtcbiAgICB9XG4gICAgb25DYW5jZWwoKSB7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKS5yZXNldCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5wdXRzVGVtcGxhdGUoKSB7XG4gICAgICAgIGxldCBjb25maWcgPSB0aGlzLmNvbmZpZyBhcyBGb3JtQ29uZmlnLFxuICAgICAgICAgICAgdGVtcGxhdGUgPSB0aGlzLmNvbmZpZyAmJiBjb25maWcuaW5saW5lID9cbiAgICAgICAgICAgICAgICAoX3Y6IGFueSwgaTogbnVtYmVyKSA9PiB7IHJldHVybiBgPHAgaWQ9J2lucHV0XyR7aX0nIGNsYXNzPSdjb250cm9sJz48L3A+YDsgfSA6XG4gICAgICAgICAgICAgICAgKF92OiBhbnksIGk6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9J2ZpZWxkJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD0naW5wdXRfJHtpfScgY2xhc3M9J2NvbnRyb2wnPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZENvbXBvbmVudHMubWFwKHRlbXBsYXRlKS5qb2luKCcnKTtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHRoaXMuY29uZmlnIGFzIEZvcm1Db25maWc7XG4gICAgICAgIHJldHVybiBgPGZvcm0gY2xhc3M9J2JveCc+XG4gICAgICAgICAgICAgICAgICAgICR7dGhpcy5jb25maWcgJiYgY29uZmlnLmlubGluZSA/ICcnIDogdGhpcy5pbnB1dHNUZW1wbGF0ZSgpfVxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0nZmllbGQgaXMtZ3JvdXBlZCc+XG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuY29uZmlnICYmIGNvbmZpZy5pbmxpbmUgPyB0aGlzLmlucHV0c1RlbXBsYXRlKCkgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSdjb250cm9sJz48YSBpZD0nc3VibWl0JyBjbGFzcz0nYnV0dG9uIGlzLXByaW1hcnknPlN1Ym1pdDwvYT48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0nY29udHJvbCc+PGEgaWQ9J2NhbmNlbCcgY2xhc3M9J2J1dHRvbiBpcy1saWdodCc+Q2FuY2VsPC9hPjwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZm9ybT5gO1xuICAgIH1cbn1cblxuaW50ZXJmYWNlIEZvcm1Db25maWcgZXh0ZW5kcyBDb21wb25lbnRDb25maWcge1xuICAgIGlubGluZTogYm9vbGVhbjtcbn1cblxuY2xhc3MgVGV4dGlucHV0IGV4dGVuZHMgSW5wdXQge1xuXG5cbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgY29uZmlnPzogVGV4dGlucHV0Q29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGVsZSwgbmFtZSwgY29uZmlnKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICB0aGlzLmVsZS5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmluaXQoKTtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHRoaXMuY29uZmlnIGFzIElucHV0Q29uZmlnXG4gICAgICAgIHJldHVybiBgPGxhYmVsPiR7Y29uZmlnLmxhYmVsID8gY29uZmlnLmxhYmVsIDogbmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSdpbnB1dCcgdHlwZT0nJHtjb25maWcudHlwZSA/IGNvbmZpZy50eXBlIDogJ3RleHQnfScgXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0nJHtjb25maWcucGxhY2Vob2xkZXIgPyBjb25maWcucGxhY2Vob2xkZXIgOiAnaW5wdXQnfScgJHt0aGlzLnRlbXBsYXRlUHJvcHMoKX0+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5gO1xuICAgIH1cbn1cbmludGVyZmFjZSBUZXh0aW5wdXRDb25maWcgZXh0ZW5kcyBJbnB1dENvbmZpZyB7XG4gICAgdHlwZT86IHN0cmluZztcbn1cbmNsYXNzIFRleHRhcmVhIGV4dGVuZHMgSW5wdXQge1xuXG4gICAgY29uc3RydWN0b3IoZWxlOiBFbGVtZW50LCBuYW1lOiBzdHJpbmcsIGNvbmZpZz86IFRleHRhcmVhQ29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGVsZSwgbmFtZSwgY29uZmlnKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICB0aGlzLmVsZS5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmluaXQoKTtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHRoaXMuY29uZmlnIGFzIFRleHRhcmVhQ29uZmlnO1xuICAgICAgICByZXR1cm4gYDxsYWJlbD4ke2NvbmZpZy5sYWJlbCA/IGNvbmZpZy5sYWJlbCA6IHRoaXMubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzPSd0ZXh0YXJlYScgcGxhY2Vob2xkZXI9JyR7Y29uZmlnLnBsYWNlaG9sZGVyID8gY29uZmlnLnBsYWNlaG9sZGVyIDogJ0lucHV0J30nXG4gICAgICAgICAgICAgICAgICAgICR7Y29uZmlnLnJvd3MgPyBgIHJvd3M9JyR7Y29uZmlnLnJvd3N9J2AgOiAnJ30gJHt0aGlzLnRlbXBsYXRlUHJvcHMoKX0+PC90ZXh0YXJlYT5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPmA7XG4gICAgfVxufVxuXG5pbnRlcmZhY2UgVGV4dGFyZWFDb25maWcgZXh0ZW5kcyBJbnB1dENvbmZpZyB7XG4gICAgcm93cz86IG51bWJlcjtcbn1cblxuXG5jbGFzcyBEcm9wZG93bjxUIGV4dGVuZHMgbnVtYmVyIHwgc3RyaW5nLCBVIGV4dGVuZHMgbnVtYmVyIHwgc3RyaW5nPiBleHRlbmRzIElucHV0IHtcblxuICAgIHByaXZhdGUgb3B0aW9uczogT3B0aW9uPFQsIFU+W107XG5cbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgb3B0aW9uczogT3B0aW9uPFQsIFU+W10sIGNvbmZpZz86IElucHV0Q29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGVsZSwgbmFtZSwgY29uZmlnKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICB0aGlzLmVsZS5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBzdXBlci5pbml0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcHRpb25zVGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubWFwKG8gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGA8b3B0aW9uIHZhbHVlPScke28udmFsdWV9Jz4ke28udGV4dH08L29wdGlvbj5gO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHRoaXMuY29uZmlnIGFzIElucHV0Q29uZmlnXG4gICAgICAgIHJldHVybiBgPGxhYmVsPiR7Y29uZmlnLmxhYmVsID8gY29uZmlnLmxhYmVsIDogdGhpcy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0nc2VsZWN0Jz48c2VsZWN0ICR7dGhpcy50ZW1wbGF0ZVByb3BzKCl9PiR7dGhpcy5vcHRpb25zVGVtcGxhdGUoKX08L3NlbGVjdD48L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5gO1xuICAgIH1cbn1cblxuY2xhc3MgQ2hlY2tib3ggZXh0ZW5kcyBJbnB1dCB7XG5cbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgY29uZmlnPzogSW5wdXRDb25maWcpIHtcbiAgICAgICAgc3VwZXIoZWxlLCBuYW1lLCBjb25maWcpO1xuICAgICAgICBpZiAoY29uZmlnLmxhYmVsKSB0aGlzLmxhYmVsID0gY29uZmlnLmxhYmVsO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXQoKSB7XG4gICAgICAgIHRoaXMuZWxlLmlubmVySFRNTCA9IHRoaXMudGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5lbGUucXVlcnlTZWxlY3RvcignaW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgICAgICByZXR1cm4gc3VwZXIuaW5pdCgpO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlKGU6IEV2ZW50KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZDtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgbGV0IGNvbmZpZyA9IHRoaXMuY29uZmlnIGFzIElucHV0Q29uZmlnO1xuICAgICAgICByZXR1cm4gYDxsYWJlbCBjbGFzcz0nY2hlY2tib3gnPiR7Y29uZmlnLmxhYmVsID8gY29uZmlnLmxhYmVsIDogdGhpcy5uYW1lfTxpbnB1dCB0eXBlPSdjaGVja2JveCcgJHt0aGlzLnRlbXBsYXRlUHJvcHMoKX0+PC9sYWJlbD5gXG4gICAgfVxufVxuXG5jbGFzcyBSYWRpbzxUIGV4dGVuZHMgbnVtYmVyIHwgc3RyaW5nLCBVIGV4dGVuZHMgbnVtYmVyIHwgc3RyaW5nPiBleHRlbmRzIElucHV0IHtcblxuICAgIHByaXZhdGUgb3B0aW9uczogT3B0aW9uPFQsIFU+W107XG5cbiAgICBjb25zdHJ1Y3RvcihlbGU6IEVsZW1lbnQsIG5hbWU6IHN0cmluZywgb3B0aW9uczogT3B0aW9uPFQsIFU+W10sIGNvbmZpZz86IElucHV0Q29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGVsZSwgbmFtZSwgY29uZmlnKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgICB0aGlzLmVsZS5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3IoJ2RpdicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIHJldHVybiBzdXBlci5pbml0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByYWRpb1RlbXBsYXRlKCkge1xuICAgICAgICBsZXQgY29uZmlnID0gdGhpcy5jb25maWcgYXMgSW5wdXRDb25maWdcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5tYXAobyA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYDxsYWJlbCBjbGFzcz0ncmFkaW8nPiR7Y29uZmlnLmxhYmVsID8gY29uZmlnLmxhYmVsIDogdGhpcy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9J3JhZGlvJyB2YWx1ZT0nJHtvLnZhbHVlfScgbmFtZT0nJHt0aGlzLm5hbWV9Jz4ke28udGV4dH1cbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5gXG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgIH1cblxuICAgIG9uQ2hhbmdlKGU6IEV2ZW50KSB7XG4gICAgICAgIGxldCBjaGVja2VkSW5wdXQgPSBBcnJheS5mcm9tKHRoaXMuZWxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykpXG4gICAgICAgICAgICAuZmluZChpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaS5jaGVja2VkO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy52YWx1ZSA9IGNoZWNrZWRJbnB1dC52YWx1ZTtcbiAgICB9XG5cbiAgICB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPSdjb250cm9sJz4ke3RoaXMucmFkaW9UZW1wbGF0ZSgpfTwvZGl2PmA7XG4gICAgfVxufVxuXG5leHBvcnQge1xuICAgIElucHV0LCBPcHRpb24sIEZvcm0sIFRleHRpbnB1dCwgVGV4dGFyZWEsIERyb3Bkb3duLCBDaGVja2JveCwgUmFkaW8sXG4gICAgRm9ybUNvbmZpZywgSW5wdXRDb25maWcsIFRleHRhcmVhQ29uZmlnLCBUZXh0aW5wdXRDb25maWdcbn07IiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudHMvY29tbW9uL0NvbXBvbmVudCc7XG5pbXBvcnQgQ3JlYXRlSW5wdXQgZnJvbSAnLi9jb21wb25lbnRzL0NyZWF0ZUlucHV0JztcblxuY2xhc3MgTWFpbiBleHRlbmRzIENvbXBvbmVudCB7XG5cbiAgICBzdGF0aWMgbG9hZCgpIHtcbiAgICAgICAgbGV0IG1haW4gPSBuZXcgTWFpbihkb2N1bWVudC5ib2R5KTtcbiAgICAgICAgbWFpbi5pbml0KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5lbGUuaW5uZXJIVE1MID0gdGhpcy50ZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLmNoaWxkQ29tcG9uZW50cy5wdXNoKG5ldyBDcmVhdGVJbnB1dCh0aGlzLmVsZS5xdWVyeVNlbGVjdG9yKCcjZm9ybScpKSk7XG4gICAgICAgIHJldHVybiBzdXBlci5pbml0KCk7XG4gICAgfVxuXG4gICAgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBgPGRpdiBpZD0nZm9ybSc+PC9kaXY+YDtcbiAgICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBNYWluLmxvYWQpOyJdfQ==
